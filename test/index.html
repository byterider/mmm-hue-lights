<script>
	Module = {
		register: (name, content) => {
			console.log(name, content);
			mod = content;
			mod.name = name;
		},
	};
	Log = console;
</script>
<script src="../mmm-hue-lights.js"></script>
<script>
	mod
		.getScripts()
		.forEach((i) => document.write(`<script src="../${i}"><\/script>`));
	mod
		.getStyles()
		.forEach((i) => document.write(`<link rel="stylesheet" href="../${i}">`));
</script>

<div class="mod mmm-hue-lights"></div>

<script>
	mod.updateDom = () => document.querySelector(".mod").append(mod.getDom());
	mod.sendSocketNotification = (command, url) => console.log(command, url);

	mod.config = mod.defaults;
	mod.config.bridgeIp = "mock-bridge-ip";
	mod.config.user = "mock-user";
	mod.config.orderByName = true;

	mod.start();
	fetch("hue.json")
		.then((response) => response.json())
		.then((data) => {
			mod.lights = data.lights;
			mod.loaded = true;
			mod.updateDom();
		});
</script>
